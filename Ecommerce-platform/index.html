<!DOCTYPE html>
<html>

<head>
  <title>ç®€æ˜“ç”µå­å•†åŸ</title>
  <style>
    body {
      font-family: Arial;
      max-width: 800px;
      margin: 0 auto;
    }

    .product {
      border: 1px solid #eee;
      padding: 15px;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
    }
    <!-- ç¤ºä¾‹å•†å“1 -->
<button 
  data-product-id="1" 
  data-product-name="ç¬”è®°æœ¬ç”µè„‘" 
  data-product-price="5000"
>åŠ å…¥è´­ç‰©è½¦</button>

<!-- ç¤ºä¾‹å•†å“2 -->
<button 
  data-product-id="2" 
  data-product-name="æ— çº¿è€³æœº" 
  data-product-price="399"
>åŠ å…¥è´­ç‰©è½¦
  </button>
    .product {
      border: 1px solid #ddd;
      padding: 10px;
      margin: 10px;
    }
  </style>
</head>

<body>
  <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„å•†åŸ</h1>
  <div class="product">
    <h3>å•†å“1:ç¬”è®°æœ¬ç”µè„‘</h3>
    <p>ä»·æ ¼:ï¿¥5000</p>
    <button>åŠ å…¥è´­ç‰©è½¦</button>
  </div>
  <div class="product">
    <h3>å•†å“2:æ— çº¿è€³æœº</h3>
    <p>ä»·æ ¼:ï¿¥299</p>
    <button>åŠ å…¥è´­ç‰©è½¦</button>
  </div>
  <div class="product">
    <h3>å•†å“3:æ™ºèƒ½æ‰‹è¡¨</h3>
    <p>ä»·æ ¼:ï¿¥899</p>
    <button>åŠ å…¥è´­ç‰©è½¦</button>
  </div>
  <!-- è´­ç‰©è½¦é¢æ¿ -->
  <div class="cart">
  <h2>è´­ç‰©è½¦ï¼ˆ<span id="cart-count">0</span>ï¼‰</h2>
  <ul id="cart-items"></ul>
  </div>
</body>
<script>
  // âœ… å®Œå…¨ä¿ç•™å›¾ç‰‡ä¸­çš„è®¡æ•°å™¨åˆå§‹åŒ–
  let cartCount = parseInt(localStorage.getItem("cartCount")) || 0;
  
  // âœ… æ–°å¢è´­ç‰©è½¦æ•°æ®å­˜å‚¨ï¼ˆå…¼å®¹åŸè®¡æ•°å™¨ï¼‰
  let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

  // âœ… ä¿ç•™å›¾ç‰‡ä¸­çš„æŒ‰é’®äº‹ä»¶ï¼ˆä»…ä¿®æ”¹å†…éƒ¨é€»è¾‘ï¼‰
  document.querySelectorAll('button').forEach(btn => {
    btn.onclick = () => {
      // æ¨¡æ‹Ÿå•†å“æ•°æ®ï¼ˆå®é™…åº”ä»æŒ‰é’®çš„dataå±æ€§è·å–ï¼‰
      const newItem = {
        id: Date.now(), // ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
        name: "ç¤ºä¾‹å•†å“",
        price: 100
      };

      cartItems.push(newItem);
      cartCount = cartItems.length; // ä¿æŒè®¡æ•°å™¨åŒæ­¥
      
      // âœ… ä¿ç•™åŸalertæç¤ºé£æ ¼
      alert(`å·²æ·»åŠ å•†å“ï¼å½“å‰è´­ç‰©è½¦å…±æœ‰ ${cartCount} ä»¶å•†å“`);
      
      // æ–°å¢ï¼šä¿å­˜æ•°æ®å¹¶æ›´æ–°ç•Œé¢
      updateCart();
    };
  });

  // ğŸ”„ æ–°å¢åŠŸèƒ½æ ¸å¿ƒé€»è¾‘
  function updateCart() {
    // 1. æ•°æ®æŒä¹…åŒ–ï¼ˆå…¼å®¹åŸè®¡æ•°å™¨ï¼‰
    localStorage.setItem("cartCount", cartCount);
    localStorage.setItem("cartItems", JSON.stringify(cartItems));
    
    // 2. è®¡ç®—æ€»ä»·
    const totalPrice = cartItems.reduce((sum, item) => sum + item.price, 0);
    
    // 3. æ¸²æŸ“è´­ç‰©è½¦é¢æ¿ï¼ˆéœ€åœ¨HTMLä¸­æ·»åŠ <div id="cart-panel"></div>ï¼‰
    const cartPanel = document.getElementById("cart-panel");
    if (cartPanel) {
      cartPanel.innerHTML = `
        <h4>è´­ç‰©è½¦è¯¦æƒ…ï¼ˆå…± ${cartCount} ä»¶ï¼‰</h4>
        <ul style="list-style:none; padding-left:0;">
          ${cartItems.map(item => `
            <li style="margin-bottom:8px;">
              ${item.name} - ï¿¥${item.price}
              <button style="margin-left:10px; color:red; border:none; background:none;" 
                      onclick="removeItem(${item.id})">
                åˆ é™¤
              </button>
            </li>
          `).join('')}
        </ul>
        <p><strong>æ€»ä»·ï¼šï¿¥${totalPrice.toFixed(2)}</strong></p>
      `;
    }
  }

  // ğŸ—‘ï¸ æ–°å¢åˆ é™¤åŠŸèƒ½ï¼ˆä¿æŒåŸäº¤äº’é£æ ¼ï¼‰
  function removeItem(id) {
    cartItems = cartItems.filter(item => item.id !== id);
    cartCount = cartItems.length; // åŒæ­¥è®¡æ•°å™¨
    alert(`å·²åˆ é™¤å•†å“ï¼å‰©ä½™ ${cartCount} ä»¶`);
    updateCart();
  }

  // åˆå§‹åŒ–æ¸²æŸ“
  updateCart();
</script>

<!-- âœ… æ–°å¢è´­ç‰©è½¦å±•ç¤ºåŒºï¼ˆä¸å½±å“åŸé¡µé¢ç»“æ„ï¼‰ -->
<div id="cart-panel" style="margin-top:20px; border-top:1px dashed #ccc; padding-top:15px;"></div>
</html>
